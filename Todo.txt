1. 每个店各增加 pending promo_files, 如果当前时间还没到 promo start date，就先把这个 item 放到 pending promo_files 里面，把他从当前对接列表里面移除，先别对接。

每天跑一遍 pending promo_files，如果当前时间已经到了 promo start date，就对接进去，然后从 pending promo_files 里面移除。

2. 修改脚本逻辑，当未来有新的商店要对接的时候，只需要把新的商店放到 config.properties 里面，然后跑脚本就可以了。

3.处理他们文件有 error code 的时候，要重试，不要 raise error
Error: 500 - {
    "code": "X500199",
    "message": "Internal server error has occurred, please try again later."
}

4. Now in UTC-6: 2024-11-11 01:17:41
Only integrate ['ITM'] files

Store 02 starts

^CError: 401 - {
    "code": "X401000",
    "message": "The specified token is invalid or has expired"
} 
这个卡死停机了。

5.{
    "sku" : "75076405"
  }, {
    "sku" : "75076740"
  }

  对接只有 sku 的时候不要对接。

  6. 有时候对接卡在哪个地方不动了。比如下面那个在 03 store 卡住了。不知道为什么，应该是他们 api 卡住了。要加一个机制。或者使用定时任务 cron job 来跑脚本。写一个 bash 吧
  
  在脚本中设置超时时间 防止脚本因某些问题无限制运行：

  如果使用 Bash，可以用 timeout：

  bash
  Copy code
  timeout 3600 ./your_script.sh
  上述命令会在 3600 秒后终止脚本。

  如果是 Python 脚本，可以通过 signal 模块实现超时。


  ------------------------------------
Now in UTC-6: 2024-11-28 09:54:59
Only integrate ['ITM'] files

Store 02 starts

0 documents found.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Store 03 starts

^C^CTraceback (most recent call last):
  File "/Users/liangzhisong/Dropbox/script/Bara Integration/bara_integration.py", line 626, in <module>
    main(customer_code, "03", client_id, client_secret,
  File "/Users/liangzhisong/Dropbox/script/Bara Integration/bara_integration.py", line 566, in main
    raw_data_list, document_names_fileType = get_raw_base64_data(
  File "/Users/liangzhisong/Dropbox/script/Bara Integration/bara_integration.py", line 192, in get_raw_base64_data
    document_list = get_document_list(
  File "/Users/liangzhisong/Dropbox/script/Bara Integration/bara_integration.py", line 112, in get_document_list
    response = post_request(base_url, endpoint, headers, body)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/retrying.py", line 56, in wrapped_f
    return Retrying(*dargs, **dkw).call(f, *args, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/retrying.py", line 274, in call
    time.sleep(sleep / 1000.0)
KeyboardInterrupt
